адача 9: Работа с файлами
В приложении projects создайте новый модуль utils
Создайте в этом модуле файл upload_file_helpers.py
В этом файле необходимо создать функции:
Функция на проверку валидных расширений файла
Функция на проверку размерности файла (файл не должен быть больше 2 MB)
Функция на создание пути для сохранения файла
Функция на сохранение файла (файл должен записываться по частям для избежания потенциальных ошибок и потери данных)
В модуле serializers в приложении projects создайте новый файл project_file_serializers.py
Создайте сериализатор AllProjectFilesSerializer для отображения краткой информации по всем файлам:
id
file_name
project
Создайте сериализатор CreateProjectFileSerializer для создания нового файла:
Для создания необходимо только поле file_name
Поле file_name необходимо валидировать:
Проверка на наличие символов из таблицы ASCII
Проверка на доступные расширения файлов (pdf, csv, doc, xlsx)
7. Переопределите метод create:
Перед сохранением файла необходимо создать путь для сохранения
Так же необходимо получить из тела запроса сам файл и проверить его на размерность (не более 2 MB)
Если файл проходит все проверки - сохранить его в проекте, сохранить объект файла
если файл слишком большой - поднять исключение валидации с сообщением об ошибке
8. Напишите класс-отображение
ProjectFileListAPIView для получения списка всех файлов:
Реализовать метод на получение всех файлов для конкретного проекта по имени проекта. Если имя проекта не было передано - выводить список полностью всех файлов
9. Добавьте в класс-отображение ProjectFileListAPIView метод post для создания нового файла и привязки его к конкретному проекту (проект получать через поле id, которое будет передаваться в теле запроса)
10. Зарегистрируйте новый эндпоинт, проверьте как отрабатывают запросы GET, POST